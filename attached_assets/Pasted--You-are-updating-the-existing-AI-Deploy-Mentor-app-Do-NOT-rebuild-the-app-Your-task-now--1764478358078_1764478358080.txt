
You are updating the existing **AI Deploy Mentor** app.
Do NOT rebuild the app.  
Your task now:  
Add the final UX state called **“Fixed automatically – ready to deploy”** which appears whenever:

- normalization_status === "success"
- auto_fix_status === "success"
- ready_for_deploy === true

This state should tell the non-technical user:
→ The system fixed all issues automatically  
→ The project is now production-ready  
→ They can deploy with one click

-------------------------------------------------------
1. Backend logic update
-------------------------------------------------------

Modify the project JSON returned in:

- GET /api/projects
- GET /api/projects/:id

Add a new computed field:

```json
"auto_ready_message": "Fixed automatically – ready to deploy"
````

only if ALL conditions are true:

* project.normalized_status === "success"
* project.auto_fix_status === "success"
* project.ready_for_deploy === true

Else:
`auto_ready_message = null`

This is a backend-only computed field, not stored in DB.

---

2. Backend helper function

---

Create a helper function in a new file:
`utils/projectState.js`

```js
function getAutoReadyMessage(project) {
  if (
    project.normalized_status === "success" &&
    project.auto_fix_status === "success" &&
    project.ready_for_deploy === true
  ) {
    return "Fixed automatically – ready to deploy";
  }
  return null;
}

module.exports = { getAutoReadyMessage };
```

Use this helper in your API responses to inject the message.

---

3. Frontend UI change

---

In the project details panel:

If `auto_ready_message` exists:

* Show a green success banner at the top:

Title: **Fixed automatically – ready to deploy**
Subtitle:
“This project was automatically normalized, repaired and validated.
You can deploy it now with one click.”

Buttons:

* Primary CTA: **Deploy Now**
* Secondary: **View Auto-Fix Report**
* Secondary: **View Pull Request**

Design:

* Use green border + green check icon
* Similar to Vercel deploy success banner

---

4. Frontend card-level indicator (optional)

---

In the project list/grid:
If `auto_ready_message` exists:

* Add a small green badge:
  **Auto-fixed ✓ Ready**

This helps the user understand at a glance that “the system fixed everything automatically.”

---

5. Deploy Now behavior

---

When the user clicks **Deploy Now**:

* Call the existing deploy endpoint:
  POST /api/projects/:id/deploy
* After deploy success:
  Redirect back to project with “Deployment successful” message.

---

6. Requirements & constraints

---

* Do NOT change normalization or auto-fix logic.
* Do NOT require code changes in PR logic.
* This feature only adds:

  * A computed project field
  * A visual success state
  * A simple CTA for deployment
* Must not break existing flows.

---

When complete, I should be able to:

* Upload a messy ZIP
* Normalize → Auto-fix
* See an automatic PR
* And then see a green success state:
  “Fixed automatically – ready to deploy”
* With a working Deploy Now button
 
   
